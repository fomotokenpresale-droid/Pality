<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wallet UI Replica — With PnL</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #f6f7fb; color: #1a1a1a; }
    .header { padding: 20px; text-align: center; font-size: 20px; font-weight: 600; background: white; position: sticky; top: 0; }
   .search {
  margin: 15px;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid #ccc;
  width: calc(100% - 34px); /* 20% longer */
  box-sizing: border-box;
}
    .wallet-section { text-align: left; padding: 0 20px; }
    .balance { font-size: 36px; font-weight: bold; }
    .actions { display: flex; justify-content: space-around; padding: 20px 0; background: white; }
    .action { display: flex; flex-direction: column; align-items: center; font-size: 14px; cursor: pointer; }
    .circle { width: 55px; height: 55px; border-radius: 50%; background: #eee; display: flex; justify-content: center; align-items: center; margin-bottom: 8px; font-size: 22px; }
    .crypto-list { padding: 0 20px 80px 20px; }
    .wallet-coin-balance{margin-left:auto;text-align:right;}
.coin { display: flex; align-items: center; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid #ddd; cursor: pointer; }
    .coin-info { display: flex; align-items: center; gap: 12px; }
    .coin img { width: 32px; height: 32px; }
    .footer { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid #ccc; }
    .footer div { text-align: center; font-size: 14px; }

    /* pages (single-page app) */
    .page { display: none; } /* base: hidden; showMain will reveal home */
    #btcPage { padding:20px; }
    #sendBTC { position: fixed; inset: 0; background: white; display: none; flex-direction: column; padding: 20px; z-index: 99999; overflow-y: auto; }
    #confirmSend { position:fixed; inset:0; background:#ffffff; display:none; flex-direction:column; padding:20px; z-index:999999; overflow-y:auto; }

    #processingPopup { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center; z-index: 1000000; }
    .processing-card { background: #fff; padding: 24px; border-radius: 14px; width: calc(100% - 64px); max-width: 360px; text-align: center; }
    .spinner { width: 56px; height: 56px; border-radius: 50%; border: 6px solid #e6e6e6; border-top-color: #0a53ff; margin: 0 auto 14px; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .processing-title { font-weight:700; margin-bottom:8px; }
    .processing-text { color:#555; font-size:14px; }

    #txDetails { padding:20px; }

    .tx-row { display:flex; justify-content:space-between; margin-bottom:10px; }
    .status-pending { color:#f59e0b; font-weight:700; }
    .status-success { color:#10b981; font-weight:700; }

    /* small additions for modal controls so they look okay */
    .select-coin { width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ccc; margin-top:10px; }
    .input { width:100%; padding:14px; margin-top:6px; border-radius:12px; border:1px solid #ccc; font-size:16px; }
#confirmTo {
    display: inline-block;
    max-width: 140px;   /* ← reduce visible characters */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
    /* action button style used for primary actions (royal blue) */
    .action-btn {
      width: 100%;
      padding: 16px;
      font-size: 18px;
      background: royalblue;
      color: #fff;
      border: none;
      border-radius: 12px;
      margin-top: 20px;
      cursor: pointer;
    }

    .ghost-btn {
      width: 100%;
      padding: 14px;
      font-size: 16px;
      background: #f3f3f3;
      color: #222;
      border: none;
      border-radius: 12px;
      margin-top: 12px;
      cursor: pointer;
    }

    @media(min-width:700px){ .container{max-width:720px;margin:0 auto} }
  
#sendCoinSelect { display: none !important; }

.input-wrapper {
    position: relative;
    width: 100%;
}

/* More room on the right so text never touches icons */
.input-wrapper input {
    padding-right: 80px;
    box-sizing: border-box;
}

/* Protected icon box, centered vertically */
.right-icons {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    gap: 10px;
    background: transparent;
    pointer-events: auto;
    align-items: center;
}

/* Paste + QR not bold */
.paste,
.qr {
    color: #0a53ff;
    font-weight: normal;
}

/* MAX matches Paste + QR */
.max {
    color: #0a53ff;
    font-weight: normal;
}

/* Amount input icons centered as well */
.amount-icons {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    gap: 8px;
    align-items: center;
}
.wallet-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.wallet-title {
  display: flex;
  align-items: center;
  gap: 6px;
}

.top-icons {
  display: flex;
  gap: 8px;
  align-items: center;
}

.top-icons svg {
  cursor: pointer;
}.wallet-section {
  margin: 0;             /* remove unwanted spacing */
  padding: 0 15px;       /* match the search bar */
  width: 100%;
  box-sizing: border-box;
}
  .asset-tabs {
  display: flex;
  justify-content: center;   /* move them closer to each other */
  align-items: center;
  gap: 150px;                 /* reduce space between Crypto & NFTs */
  margin-top: 20px;
}

.asset-tabs .tab {
  font-size: 16px;           /* smaller font */
  font-weight: 400;          /* not bold */
  color: #8A8F97;
  position: relative;
  cursor: pointer;
}

.asset-tabs .tab.active {
  color: #1a1a1a;
  font-weight: 500;          /* still slightly stronger but not bold */
}

.asset-tabs .tab.active::after {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: -3px;              /* slightly closer underline */
  width: 60px;               /* shorter underline */
  height: 3px;               /* thinner underline */
  border-radius: 3px;
  background: #0047FF;
}

/* PnL styles (bright colors as requested) */
.pnl-up { color: #10b981; font-weight: 600; }
.pnl-down { color: #ef4444; font-weight: 600; }

/* smaller muted price text */
.price-small { color: #6b7280; font-size: 12px; display:block; margin-top:2px; }
  </style>
</head>
<body>

  <!-- HOME PAGE (wrap in .page) -->
  <div id="home-page" class="page">
    
<div class="header" style="display:flex;justify-content:space-between;align-items:center;padding:20px;font-size:20px;font-weight:600;background:white;">
  <div style="font-size:22px;color:#9CA3AF;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
     xmlns="http://www.w3.org/2000/svg">

  <!-- Gear outer shape -->
  <path d="M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58a.48.48 0 00.11-.61l-1.92-3.32a.48.48 0 00-.58-.22l-2.39.96a7.03 7.03 0 00-1.63-.94l-.36-2.54A.48.48 0 0014 2h-4a.48.48 0 00-.48.41l-.36 2.54c-.59.23-1.14.53-1.63.94l-2.39-.96a.48.48 0 00-.58.22L2.64 8.87a.48.48 0 00.11.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58a.48.48 0 00-.11.61l1.92 3.32c.13.23.39.32.58.22l2.39-.96c.49.41 1.04.72 1.63.94l.36 2.54c.05.24.24.41.48.41h4c.24 0 .43-.17.48-.41l.36-2.54c.59-.23 1.14-.53 1.63-.94l2.39.96c.19.1.45.01.58-.22l1.92-3.32a.48.48 0 00-.11-.61l-2.03-1.58z"
        fill="#9CA3AF"/>

  <!-- Center circle -->
  <circle cx="12" cy="12" r="3" fill="#ffffff" opacity="0.7"/>
</svg></div>
  <div>Home</div>
  <div style="font-size:22px;color:#9CA3AF;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <!-- Back circle -->
  <circle cx="15" cy="9" r="6" fill="#9CA3AF" opacity="0.6"/>
  
  <!-- Front circle -->
  <circle cx="10" cy="14" r="7" fill="#9CA3AF"/>
  
  <!-- Inner dot for front circle -->
  <circle cx="10" cy="14" r="3" fill="#FFFFFF" opacity="0.7"/>
</svg></div>
</div>


    <input class="search" placeholder="Search" />

<div class="wallet-section">

  <!-- FLEX ROW CONTAINING: Wallet title (left) + Icons (right) -->
  <div class="wallet-header">

    <!-- LEFT SIDE: Eye icon + Main Wallet text -->
    <div class="wallet-title">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
           viewBox="0 0 24 24" style="vertical-align:-4px;">
        <path fill="#8A9199"
          d="M12 5c-5 0-9 5-9 7s4 7 9 7 9-5 9-7-4-7-9-7zm0 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-6a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
      </svg>
      Main Wallet 4 ▾
    </div>

    <!-- RIGHT SIDE ICONS -->
    <div class="top-icons">
      <!-- DUPLICATE -->
      <svg width="32" height="32" viewBox="0 0 48 48">
        <rect width="48" height="48" rx="10" fill="#F4F5F7"/>
        <rect x="20" y="16" width="12" height="12" rx="2" fill="#8A8F97"/>
        <rect x="16" y="20" width="12" height="12" rx="2"
              fill="#8A8F97" stroke="#F4F5F7" stroke-width="2"/>
      </svg>

      <!-- EXPAND -->
      <svg width="32" height="32" viewBox="0 0 48 48">
        <rect width="48" height="48" rx="10" fill="#F4F5F7"/>
        <path d="M17 17h4v-2h-6v6h2v-4zm14 0h-4v-2h6v6h-2v-4zm-14 14h4v2h-6v-6h2v4zm14 0h-4v2h6v-6h-2v4z" fill="#8A8F97"/>
        <rect x="20" y="23" width="8" height="2" fill="#8A8F97"/>
      </svg>

      <!-- BELL -->
      <svg width="32" height="32" viewBox="0 0 48 48">
        <rect width="48" height="48" rx="10" fill="#F4F5F7"/>
        <path d="M24 14c-4 0-7 3-7 7v6h-2v2h18v-2h-2v-6c0-4-3-7-7-7zm0 18c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2z" fill="#8A8F97"/>
      </svg>
    </div>

  </div>

  <!-- BALANCE LINE BELOW -->
  <div class="balance" id="mainBalance">$0.00</div>

</div>

    <div class="actions">
      <div class="action"><div class="circle"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
  <circle cx="24" cy="24" r="22" fill="#f2f3f7"/>
  <!-- taller & slimmer arrow -->
  <polyline points="18 26 24 18 30 26"
            fill="none"
            stroke="#2b3136"
            stroke-width="2.5"
            stroke-linecap="round"
            stroke-linejoin="round"/>
  <line x1="24" y1="34" x2="24" y2="18"
        stroke="#2b3136"
        stroke-width="2.5"
        stroke-linecap="round"/>
</svg></div>Send</div>
      <div class="action"><div class="circle"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
  <circle cx="24" cy="24" r="22" fill="#f2f3f7"/>

  <!-- flipped arrow -->
  <polyline points="18 22 24 30 30 22"
            fill="none"
            stroke="#2b3136"
            stroke-width="2.5"
            stroke-linecap="round"
            stroke-linejoin="round"/>
  
  <line x1="24" y1="30" x2="24" y2="14"
        stroke="#2b3136"
        stroke-width="2.5"
        stroke-linecap="round"/>
</svg></div>Receive</div>
      <div class="action"><div class="circle"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
  <circle cx="24" cy="24" r="22" fill="#f2f3f7"/>
  <rect x="14" y="18" width="20" height="14" rx="2" fill="#000"/>
  <rect x="14" y="20" width="20" height="3" fill="#f2f3f7"/>
</svg></div>Buy</div>
      <div class="action"><div class="circle"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
  <circle cx="24" cy="24" r="22" fill="#f2f3f7"/>
  <path d="M12 22l12-8 12 8v12H12z" fill="#000"/>
  <rect x="17" y="25" width="4" height="7" fill="#f2f3f7"/>
  <rect x="22" y="25" width="4" height="7" fill="#f2f3f7"/>
  <rect x="27" y="25" width="4" height="7" fill="#f2f3f7"/>
</svg></div>Sell</div>
      <div class="action"><div class="circle"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
  <circle cx="24" cy="24" r="22" fill="#f2f3f7"/>
  <path d="M18 12h12l6 6v18H18z" fill="#000"/>
  <circle cx="30" cy="30" r="5" fill="#f2f3f7"/>
  <path d="M30 26v4l3 2" stroke="#000" stroke-width="2" stroke-linecap="round" fill="none"/>
</svg></div>History</div>
    </div>
<div class="asset-tabs">
  <div class="tab active">Crypto</div>
  <div class="tab">NFTs</div>
</div>
    <div class="crypto-list">
      <!-- BTC -->
      <div class="coin" id="btcRow">
        <div class="coin-info">
          <img src="https://cryptologos.cc/logos/bitcoin-btc-logo.png" alt="BTC" />
          <div>
            <div>BTC</div>
            <small id="btcPriceText" class="price-small">Loading...</small>
          </div>
        </div>
        <div id="btcWalletBalance" class="wallet-coin-balance">0 BTC <span class='usd' style=\"font-size:12px;color:#A0A5AB;\">$0.00</span></div>
      </div>

      <!-- SOL -->
      <div class="coin" id="solRow">
        <div class="coin-info">
          <img src="https://cryptologos.cc/logos/solana-sol-logo.png" alt="SOL" />
          <div>
            <div>SOL</div>
            <small id="solPriceText" class="price-small">Loading...</small>
          </div>
        </div>
        <div id="solWalletBalance" class="wallet-coin-balance">0 SOL <span class='usd' style=\"font-size:12px;color:#A0A5AB;\">$0.00</span></div>
      </div>

      <!-- ETH -->
      <div class="coin" id="ethRow">
        <div class="coin-info">
          <img src="https://cryptologos.cc/logos/ethereum-eth-logo.png" alt="ETH" />
          <div>
            <div>ETH</div>
            <small id="ethPriceText" class="price-small">Loading...</small>
          </div>
        </div>
        <div id="ethWalletBalance" class="wallet-coin-balance">0 ETH <span class='usd' style=\"font-size:12px;color:#A0A5AB;\">$0.00</span></div>
      </div>

      <!-- BNB -->
      <div class="coin" id="bnbRow">
        <div class="coin-info">
          <img src="https://cryptologos.cc/logos/bnb-bnb-logo.png" alt="BNB" />
          <div>
            <div>BNB</div>
            <small id="bnbPriceText" class="price-small">Loading...</small>
          </div>
        </div>
        <div id="bnbWalletBalance" class="wallet-coin-balance">0 BNB <span class='usd' style=\"font-size:12px;color:#A0A5AB;\">$0.00</span></div>
      </div>

      <!-- USDT -->
      <div class="coin" id="usdtRow">
        <div class="coin-info">
          <img src="https://cryptologos.cc/logos/tether-usdt-logo.png" alt="USDT" />
          <div>
            <div>USDT</div>
            <small id="usdtPriceText" class="price-small">Loading...</small>
          </div>
        </div>
        <div id="usdtWalletBalance" class="wallet-coin-balance">0 USDT <span class='usd' style=\"font-size:12px;color:#A0A5AB;\">$0.00</span></div>
      </div>
    </div>

    <div class="footer">
      <div><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">

  <!-- house -->
  <g>
    <!-- roof -->
    <polygon points="24,6 6,20 10,20 10,34 38,34 38,20 42,20" fill="#1633FF"/>

    <!-- door -->
    <rect x="20.5" y="23" width="7" height="9" rx="0.8" fill="#FFFFFF"/>
  </g>

  <!-- label (shifted upward to fit inside 48px height) -->
  <text x="24" y="46" font-family="Arial, Helvetica, sans-serif"
        font-size="7.2" text-anchor="middle" fill="#1633FF">
    Home
  </text>

</svg>
</div>
      <div><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
  <!-- top arrow (right, wallet-style) -->
  <g transform="translate(0,6)">
    <!-- line -->
    <path d="M10 14 L30 14" stroke="#8A8F95" stroke-width="3.2" stroke-linecap="round" fill="none"/>

    <!-- long, thin, wallet-style arrowhead -->
    <polygon points="30,14 22,9 22,19" fill="#8A8F95"/>
  </g>

  <!-- bottom arrow (left, wallet-style) -->
  <g transform="translate(0,18)">
    <!-- line -->
    <path d="M10 14 L30 14" stroke="#9EA3A8" stroke-width="3.2" stroke-linecap="round" fill="none"/>

    <!-- long, thin, wallet-style arrowhead -->
    <polygon points="10,14 18,9 18,19" fill="#9EA3A8"/>
  </g>

  <!-- label -->
  <text x="24" y="45" font-family="Arial, Helvetica, sans-serif" font-size="7.2" text-anchor="middle" fill="#9EA3A8">Swap</text>
</svg>
</div>
      <div><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
  <!-- base / platform -->
  <rect x="10" y="30" width="28" height="4" rx="2" fill="#8A8F95" />

  <!-- coin / token -->
  <g transform="translate(0,0)">
    <circle cx="24" cy="18" r="10" fill="#B7BFC6"/>
    <!-- inner diamond -->
    <rect x="22" y="14" width="4" height="4" transform="rotate(45 24 16)" fill="#F6F7F8"/>
  </g>

  <!-- label -->
  <text x="24" y="45" font-family="Arial, Helvetica, sans-serif" font-size="7.2" text-anchor="middle" fill="#9EA3A8">Earn</text>
</svg>
</div>
      <div><svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">

  <!-- Rotated group (circle + diamond + dot) -->
  <g transform="rotate(45 24 18)">
    <!-- Outer circle -->
    <circle cx="24" cy="18" r="10" fill="#A0A5AB"/>

    <!-- Diamond / compass needle -->
    <polygon points="24,13 27,18 24,23 21,18" fill="#60656B"/>

    <!-- Tiny white circle -->
    <circle cx="24" cy="18" r="1.8" fill="#FFFFFF"/>
  </g>

  <!-- Label -->
  <text x="24" y="42" font-size="8" font-family="Arial, sans-serif"
        text-anchor="middle" fill="#A0A5AB">
    Discover
  </text>

</svg>

</svg>
</div>
    </div>
  </div>

  <!-- BTC PAGE -->
  <div id="btcPage" class="page">
    <div id="backBtn" style="display:flex;align-items:center;gap:10px;cursor:pointer;font-size:18px;margin-bottom:20px;">← Back</div>
    <h2>Bitcoin</h2>
    <div style="text-align:center;margin-top:20px;">
     <img src="https://cryptologos.cc/logos/bitcoin-btc-logo.png" width="80" alt="BTC logo" />
      <h3 id="btcHoldings">0 BTC</h3>
      <p id="btcHoldingsFiat">≈ $0.00</p>
    </div>

    <div style='display:flex;justify-content:space-around;margin:20px 0;'>
      <div class='action' id="sendFromBTC"><div class='circle'><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
  <circle cx="24" cy="24" r="22" fill="#f2f3f7"/>
  
  <!-- taller & slimmer arrow -->
  <polyline points="18 26 24 18 30 26"
            fill="none"
            stroke="#2b3136"
            stroke-width="2.5"
            stroke-linecap="round"
            stroke-linejoin="round"/>
  
  <line x1="24" y1="34" x2="24" y2="18"
        stroke="#2b3136"
        stroke-width="2.5"
        stroke-linecap="round"/>
</svg>
</div>Send</div>
      <div class='action'><div class='circle'><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
  <circle cx="24" cy="24" r="22" fill="#f2f3f7"/>

  <!-- flipped arrow -->
  <polyline points="18 22 24 30 30 22"
            fill="none"
            stroke="#2b3136"
            stroke-width="2.5"
            stroke-linecap="round"
            stroke-linejoin="round"/>
  
  <line x1="24" y1="30" x2="24" y2="14"
        stroke="#2b3136"
        stroke-width="2.5"
        stroke-linecap="round"/>
</svg>
</div>Receive</div>
      <div class='action'><div class='circle'><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
  <circle cx="24" cy="24" r="22" fill="#f2f3f7"/>
  <rect x="14" y="18" width="20" height="14" rx="2" fill="#000"/>
  <rect x="14" y="20" width="20" height="3" fill="#f2f3f7"/>
</svg>
</div>Buy</div>
      <div class='action'><div class='circle'><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
  <circle cx="24" cy="24" r="22" fill="#f2f3f7"/>

  <!-- Top arrow (right) -->
  <rect x="14" y="18" width="14" height="3" fill="#2b3136"/>
  <polygon points="28,16 34,19.5 28,23" fill="#2b3136"/>

  <!-- Bottom arrow (left) -->
  <rect x="20" y="27" width="14" height="3" fill="#2b3136"/>
  <polygon points="20,25 14,28.5 20,32" fill="#2b3136"/>
</svg>
</div>Swap</div>
      <div class='action'><div class='circle'><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
  <circle cx="24" cy="24" r="22" fill="#f2f3f7"/>
  <path d="M12 22l12-8 12 8v12H12z" fill="#000"/>
  <rect x="17" y="25" width="4" height="7" fill="#f2f3f7"/>
  <rect x="22" y="25" width="4" height="7" fill="#f2f3f7"/>
  <rect x="27" y="25" width="4" height="7" fill="#f2f3f7"/>
</svg>
</div>Sell</div>
    </div>

    <button style='background:#0a53ff;color:white;width:100%;padding:14px;border:none;border-radius:12px;font-size:16px;'>Buy BTC</button>

    <div style='margin-top:30px;border-top:1px solid #ddd;padding-top:15px;'>
      <strong>Current BTC price</strong>
      <div id="btcPriceDetail">Loading...</div>
    </div>
  </div>

  <!-- SEND PAGE (wrapped as page - will be locked to the selected coin) -->
  <div id="sendBTC" class="page" aria-hidden="true">
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <h2 id="sendHeader" style="margin:0;">Send</h2>
      <div id="closeSend" style="font-size:24px;cursor:pointer;" aria-label="Close send">✕</div>
    </div>

    <!-- select coin (will be replaced with single option on open) -->
    <select id="sendCoinSelect" class="select-coin" aria-label="Select coin to send">
      <option value="BTC">BTC</option>
      <option value="ETH">ETH</option>
      <option value="SOL">SOL</option>
      <option value="BNB">BNB</option>
      <option value="USDT">USDT</option>
    </select>

    <div style="margin-top:15px;">
      <label>Address or Domain Name</label>
      <div class="input-wrapper"><input id="sendAddress" type="text" placeholder="Search or Enter" class="input"/><span class="right-icons"><span class="paste">Paste</span> <span class="qr">▣</span></span></div>
    </div>

    <div style="margin-top:15px;">
      <label>Amount</label>
      <div class="input-wrapper"><input id="sendAmount" type="text" placeholder="BTC Amount" class="input"/><span class="amount-icons"><span class="btc">BTC</span> <span class="max">Max</span></span></div>
      <div id="sendAmountFiat" style="color:#777;margin-top:5px;">≈ $0.00</div>
    </div>

    <button id="nextBtn" style="margin-top:30px;width:100%;padding:16px;font-size:17px;border:none;background:#e5e6eb;border-radius:14px;color:#777;">Next</button>
  </div>

  <!-- CONFIRM PAGE -->
  <div id="confirmSend" class="page" aria-hidden="true">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
      <div id="backToSend" style="font-size:22px;cursor:pointer;">←</div>
      <h2 id="confirmTitle" style="margin:0;font-weight:600;">Transfer</h2>
      <div></div>
    </div>

    <div id="confirmAmount" style="font-size:26px;font-weight:700;text-align:center;">0</div>
    <div id="confirmFiat" style="color:#666;text-align:center;margin-bottom:25px;">$0.00</div>

    <div style="background:#f3f3f3;border-radius:14px;padding:18px;margin-bottom:20px;">
      <div style="display:flex;justify-content:space-between;margin-bottom:10px;">
        <span>Asset</span><span id="confirmAssetLabel">—</span>
      </div>
      <div style="display:flex;justify-content:space-between;margin-bottom:10px;">
        <span>Wallet</span><span>Main Wallet 4</span>
      </div>
      <div style="display:flex;justify-content:space-between;">
        <span>To</span><span id="confirmTo">Address</span>
      </div>
    </div>

    <div style="background:#f3f3f3;border-radius:14px;padding:18px;margin-bottom:10px;">
      <div style="display:flex;justify-content:space-between;margin-bottom:10px;">
        <span>Network fee</span><span id="confirmFee">0</span>
      </div>
      <div style="display:flex;justify-content:space-between;font-weight:600;">
        <span>Max Total</span><span id="confirmTotal">$0.00</span>
      </div>
    </div>

    <button id="confirmBtn" class="action-btn">Confirm</button>
  </div>

  <!-- PROCESSING POPUP (also a page for hiding/showing) -->
  <div id="processingPopup" class="page" aria-hidden="true">
    <div class="processing-card">
      <div class="spinner" aria-hidden="true"></div>
      <div class="processing-title">Processing</div>
      <div class="processing-text">Transaction in progress! Blockchain validation is underway...</div>
      <div class="processing-actions">
        <button id="processingDetails" class="ghost-btn">Transaction Details</button>
      </div>
    </div>
  </div>

  <!-- SUCCESS SCREEN (new) -->
  <div id="success-screen" class="page" aria-hidden="true" style="padding:20px;">
    <div style="text-align:center;">
      <div style="font-size:48px; margin-bottom:10px;">✅</div>
      <div style="font-weight:700;font-size:20px;margin-bottom:8px;">Transaction Successful</div>
      <div id="success-sub" style="color:#666;margin-bottom:20px;">Your transaction has been processed.</div>
      <button id="view-details" class="ghost-btn">View Details</button>
      <button id="success-done" class="action-btn">Done</button>
    </div>
  </div>

  <!-- TX DETAILS PAGE -->
  <div id="txDetails" class="page">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;">
      <div id="txBack" style="cursor:pointer;font-weight:700;">◀ Back</div>
      <div id="txStatus" class="status-pending">Pending</div>
    </div>

    <div id="txAmount" style="font-size:20px;font-weight:700;margin-bottom:8px;">0</div>
    <div id="txFiat" style="color:#666;margin-bottom:16px;">$0.00</div>

    <div style="background:#f3f3f3;border-radius:12px;padding:12px;margin-bottom:12px;">
      <div class="tx-row"><span>To</span><span id="txTo">Address</span></div>
      <div class="tx-row"><span>Fee</span><span id="txFee">0</span></div>
      <div class="tx-row"><span>Total</span><span id="txTotal">$0.00</span></div>
      <div class="tx-row"><span>Timestamp</span><span id="txTime">-</span></div>
    </div>

    <button id="txDone" class="action-btn">Done</button>
  </div>

<script>
/* ======================================================
   MASTER PORTFOLIO + CONFIG (with user entry prices)
   ====================================================== */

const portfolio = {
  BTC: { amount: 0.675434, api: 'bitcoin', price: 0, usd: 0 },
  SOL: { amount: 104.5359, api: 'solana', price: 0, usd: 0 },
  ETH: { amount: 19.8776, api: 'ethereum', price: 0, usd: 0 },
  BNB: { amount: 249.2332, api: 'binancecoin', price: 0, usd: 0 },
  USDT: { amount: 834, api: 'tether', price: 0, usd: 0 }
};

// display decimals config
const displayConfig = {
  BTC: {decimals:4},
  ETH: {decimals:4},
  SOL: {decimals:4},
  BNB: {decimals:4},
  USDT: {decimals:2}
};

// user-provided entry prices (cost basis)
const entryPrices = {
  BTC: 91452,
  ETH: 3029,
  SOL: 140,
  BNB: 888,
  USDT: 1
};

/* ======================================================
   ELEMENT SELECTORS (grab all needed DOM nodes once)
   ====================================================== */

const mainBalanceEl = document.getElementById('mainBalance');

const btcRow = document.getElementById('btcRow');
const solRow = document.getElementById('solRow');
const ethRow = document.getElementById('ethRow');
const bnbRow = document.getElementById('bnbRow');
const usdtRow = document.getElementById('usdtRow');

const btcWalletBalanceEl = document.getElementById('btcWalletBalance');
const solWalletBalanceEl = document.getElementById('solWalletBalance');
const ethWalletBalanceEl = document.getElementById('ethWalletBalance');
const bnbWalletBalanceEl = document.getElementById('bnbWalletBalance');
const usdtWalletBalanceEl = document.getElementById('usdtWalletBalance');

const btcHoldingsEl = document.getElementById('btcHoldings');
const btcHoldingsFiatEl = document.getElementById('btcHoldingsFiat');

const btcPriceTextEl = document.getElementById('btcPriceText');
const btcPriceDetailEl = document.getElementById('btcPriceDetail');
const solPriceTextEl = document.getElementById('solPriceText');
const ethPriceTextEl = document.getElementById('ethPriceText');
const bnbPriceTextEl = document.getElementById('bnbPriceText');
const usdtPriceTextEl = document.getElementById('usdtPriceText');

const btcPage = document.getElementById('btcPage');
const sendBTC = document.getElementById('sendBTC');
const confirmSend = document.getElementById('confirmSend');
const processingPopup = document.getElementById('processingPopup');
const txDetails = document.getElementById('txDetails');
const successScreen = document.getElementById('success-screen');

const sendHeader = document.getElementById('sendHeader');
const sendCoinSelect = document.getElementById('sendCoinSelect');
const sendAddressEl = document.getElementById('sendAddress');
const sendAmountEl = document.getElementById('sendAmount');
const sendAmountFiatEl = document.getElementById('sendAmountFiat');
const nextBtn = document.getElementById('nextBtn');

const backBtn = document.getElementById('backBtn');
const sendFromBTC = document.getElementById('sendFromBTC'); // button within BTC page
const closeSend = document.getElementById('closeSend');
const backToSend = document.getElementById('backToSend');
const confirmBtn = document.getElementById('confirmBtn');

const processingDetails = document.getElementById('processingDetails');

const txBack = document.getElementById('txBack');
const txStatus = document.getElementById('txStatus');
const txAmount = document.getElementById('txAmount');
const txFiat = document.getElementById('txFiat');
const txTo = document.getElementById('txTo');
const txFee = document.getElementById('txFee');
const txTotal = document.getElementById('txTotal');
const txTime = document.getElementById('txTime');
const txDone = document.getElementById('txDone');

const viewDetailsBtn = document.getElementById('view-details');
const successDoneBtn = document.getElementById('success-done');

/* ======================================================
   UTILS: hide/show pages cleanly
   ====================================================== */
function hideAllPages() {
  const pages = document.querySelectorAll('.page');
  pages.forEach(p => p.style.display = 'none');
}
function showMain() {
  hideAllPages();
  document.getElementById('home-page').style.display = 'block';
}
function showSuccessScreen() {
  hideAllPages();
  successScreen.style.display = 'block';
}

/* ======================================================
   PNL CALCULATIONS & UI UPDATES
   ====================================================== */

function formatUSD(n) {
  return `$${Number(n).toLocaleString(undefined,{minimumFractionDigits:2, maximumFractionDigits:2})}`;
}

function formatPrice(n) {
  // show up to 2 decimals for stablecoins/low values, no decimals for big ints
  if (n >= 1000) return `$${Number(n).toLocaleString()}`;
  return `$${Number(n).toLocaleString(undefined,{minimumFractionDigits:2, maximumFractionDigits:2})}`;
}

function calcPnLFor(symbol) {
  const p = portfolio[symbol];
  const entry = entryPrices[symbol];
  const price = p.price || 0;
  const amount = p.amount || 0;

  // USD value of holdings
  const usd = price * amount;

  // profit per unit and total profit
  const perUnit = price - entry;
  const pnlUSD = perUnit * amount;

  // percentage change vs entry price
  let pnlPct = 0;
  if (entry && entry !== 0) pnlPct = ((price - entry) / entry) * 100;

  return {
    usdValue: usd,
    pnlUSD,
    pnlPct
  };
}

function updatePriceText(symbol, elem) {
  const price = portfolio[symbol].price || 0;
  const entry = entryPrices[symbol];
  const { pnlUSD, pnlPct } = calcPnLFor(symbol);

  const priceDisplay = formatPrice(price);

  // Format percent with no brackets
  const pctText = `${pnlPct.toFixed(2)}%`;

  // DARKER green & red
  const pnlColor = pnlPct >= 0 ? "#3EE078" : "#ff0000";

  if (!elem) return;

  // Final text injected into HTML
  elem.innerHTML = `
    ${priceDisplay}
    <span style="color:${pnlColor}; font-weight:600;">
      ${pctText}
    </span>
  `;
}

/* ======================================================
   UI UPDATE: calculate USD totals and push to DOM
   ====================================================== */
function updateAllBalances() {
  let totalUSD = 0;
  for (const sym in portfolio) {
    const p = portfolio[sym];
    p.usd = (p.amount || 0) * (p.price || 0);
    totalUSD += p.usd;
  }

  mainBalanceEl.innerText = `${formatUSD(totalUSD)}`;

  // BTC
  const btc = portfolio.BTC;
btcWalletBalanceEl.innerHTML =
  `<div style="text-align:right;">
     ${btc.amount.toFixed(displayConfig.BTC.decimals)} BTC<br>
     <span class='usd' style="font-size:12px;color:#A0A5AB;">
       ${formatUSD(btc.usd)}
     </span>
   </div>`;
  btcHoldingsEl.innerText = `${btc.amount.toFixed(displayConfig.BTC.decimals)} BTC`;
  btcHoldingsFiatEl.innerText = `≈ ${formatUSD(btc.usd)}`;

  // SOL
  const sol = portfolio.SOL;
  solWalletBalanceEl.innerHTML =
  `<div style="text-align:right;">
     ${sol.amount.toFixed(displayConfig.SOL.decimals)} SOL<br>
     <span class='usd' style="font-size:12px;color:#A0A5AB;">
       ${formatUSD(sol.usd)}
     </span>
   </div>`;
  // ETH
  const eth = portfolio.ETH;
ethWalletBalanceEl.innerHTML =
  `<div style="text-align:right;">
     ${eth.amount.toFixed(displayConfig.ETH.decimals)} ETH<br>
     <span class='usd' style="font-size:12px;color:#A0A5AB;">
       ${formatUSD(eth.usd)}
     </span>
   </div>`;
  // BNB
  const bnb = portfolio.BNB;
bnbWalletBalanceEl.innerHTML =
  `<div style="text-align:right;">
     ${bnb.amount.toFixed(displayConfig.BNB.decimals)} BNB<br>
     <span class='usd' style="font-size:12px;color:#A0A5AB;">
       ${formatUSD(bnb.usd)}
     </span>
   </div>`;
  // USDT
  const usdt = portfolio.USDT;
usdtWalletBalanceEl.innerHTML =
  `<div style="text-align:right;">
     ${usdt.amount.toFixed(displayConfig.USDT.decimals)} USDT<br>
     <span class='usd' style="font-size:12px;color:#A0A5AB;">
       ${formatUSD(usdt.usd)}
     </span>
   </div>`;
  // update the small price + pnl texts (Option 2: appended in price text)
  updatePriceText('BTC', btcPriceTextEl);
  updatePriceText('SOL', solPriceTextEl);
  updatePriceText('ETH', ethPriceTextEl);
  updatePriceText('BNB', bnbPriceTextEl);
  updatePriceText('USDT', usdtPriceTextEl);
}

/* ======================================================
   PRICE FETCHING from CoinGecko
   ====================================================== */
async function fetchAllPrices() {
  try {
    const ids = Object.values(portfolio).map(c => c.api).join(',');
    const url = `https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd`;
    const res = await fetch(url);
    const data = await res.json();

    for (const sym in portfolio) {
      const apiName = portfolio[sym].api;
      const price = data && data[apiName] && data[apiName].usd ? data[apiName].usd : 0;
      portfolio[sym].price = price;
    }

    // update price labels (main detail)
    btcPriceDetailEl.innerText = formatPrice(portfolio.BTC.price);

    updateAllBalances();
  } catch (e) {
    console.error('Price fetch failed', e);
  }
}

/* initial fetch + periodic refresh */
fetchAllPrices();
setInterval(fetchAllPrices, 10000);

/* ======================================================
   NAVIGATION & EVENTS (single-page behavior)
   ====================================================== */

/* show BTC page */
btcRow.addEventListener('click', () => {
  hideAllPages();
  btcPage.style.display = 'block';
});

/* show send modal from BTC page */
sendFromBTC.addEventListener('click', () => openSendFor('BTC'));

/* clicking coin rows opens send modal for that coin */
solRow.addEventListener('click', () => openSendFor('SOL'));
ethRow.addEventListener('click', () => openSendFor('ETH'));
bnbRow.addEventListener('click', () => openSendFor('BNB'));
usdtRow.addEventListener('click', () => openSendFor('USDT'));

/* close send modal */
closeSend.addEventListener('click', () => {
  // return to main
  showMain();
});

/* tx details back/done */
txBack.addEventListener('click', () => {
  // if user comes from success-screen, show success; otherwise show main
  showMain();
});
txDone.addEventListener('click', () => {
  showMain();
});

/* back button inside btc page */
backBtn.addEventListener('click', () => showMain());

/* ======================================================
   GENERIC SEND FLOW (complete) - with locked dropdown on open
   ====================================================== */

let selectedCoin = 'BTC'; // default

const coinNames = {
  BTC: "Bitcoin",
  ETH: "Ethereum",
  SOL: "Solana",
  BNB: "BNB",
  USDT: "Polygon (USDT)"
};

function openSendFor(symbol) {
  selectedCoin = symbol || sendCoinSelect.value || 'BTC';

  // lock dropdown to single option for the selected coin
  sendCoinSelect.innerHTML = `<option value="${selectedCoin}">${coinNames[selectedCoin] || selectedCoin}</option>`;
  sendCoinSelect.value = selectedCoin;

  sendHeader.innerText = `Send ${selectedCoin}`;

  // show send modal (page)
  hideAllPages();
  sendBTC.style.display = 'flex';

  // reset fields
  sendAddressEl.value = '';
  sendAmountEl.value = '';
  sendAmountFiatEl.innerText = '≈ $0.00';

  // reset next button
  nextBtn.style.background = '#e5e6eb';
  nextBtn.style.color = '#777';
  nextBtn.disabled = true;
}

/* when changing coin selection (should be locked, but still handle) */
sendCoinSelect.addEventListener('change', (e) => {
  selectedCoin = e.target.value;
  sendHeader.innerText = `Send ${selectedCoin}`;
  const val = parseFloat(sendAmountEl.value) || 0;
  sendAmountFiatEl.innerText = `≈ $${(val * (portfolio[selectedCoin].price || 0)).toFixed(2)}`;
});

/* update fiat preview on amount input */
sendAmountEl.addEventListener('input', () => {
  const val = parseFloat(sendAmountEl.value) || 0;
  const price = portfolio[selectedCoin].price || 0;
  sendAmountFiatEl.innerText = `≈ $${(val * price).toFixed(2)}`;

  if (val > 0) {
    nextBtn.style.background = '#0a53ff';
    nextBtn.style.color = '#FFFFFF';
    nextBtn.disabled = false;
  } else {
    nextBtn.style.background = '#e5e6eb';
    nextBtn.style.color = '#777';
    nextBtn.disabled = true;
  }
});

/* NEXT -> build confirm screen */
nextBtn.addEventListener('click', () => {
  const amt = parseFloat(sendAmountEl.value) || 0;
  const addr = sendAddressEl.value || 'No address';
  const price = portfolio[selectedCoin].price || 0;
  const usd = amt * price;
  const fee = amt * 0.01; // simple fee
  const totalUSD = usd + (fee * price);

  document.getElementById('confirmAmount').innerText = `-${amt} ${selectedCoin}`;
  document.getElementById('confirmFiat').innerText = `≈ $${usd.toFixed(2)}`;
  document.getElementById('confirmFee').innerText = `${fee.toFixed(displayConfig[selectedCoin].decimals)} ${selectedCoin}`;
  document.getElementById('confirmTotal').innerText = `$${totalUSD.toFixed(2)}`;
  document.getElementById('confirmTo').innerText = addr;
  document.getElementById('confirmAssetLabel').innerText = `${selectedCoin}`;
  document.getElementById('confirmTitle').innerText = `Transfer ${selectedCoin}`;

  // swap screens
  hideAllPages();
  confirmSend.style.display = 'flex';
});

/* back to send from confirm */
backToSend.addEventListener('click', () => {
  hideAllPages();
  sendBTC.style.display = 'flex';
});

/* CONFIRM -> process tx, deduct and show success */
confirmBtn.addEventListener('click', () => {
  // show processing
  hideAllPages();
  processingPopup.style.display = 'flex';

  document.body.style.overflow = 'hidden';

  setTimeout(() => {
    // read amount & symbol from confirm display
    const confirmAmtText = document.getElementById('confirmAmount').innerText || '';
    const parts = confirmAmtText.replace('-', '').split(' ');
    const amt = parseFloat(parts[0]) || 0;
    const sym = parts[1] || selectedCoin;

    const feeText = document.getElementById('confirmFee').innerText || '';

    // deduct coin amount
    portfolio[sym].amount = Math.max(0, (portfolio[sym].amount || 0) - amt);

    // refresh UI numbers
    updateAllBalances();

    // populate tx details for possible viewing later
    txStatus.className = 'status-success';
    txStatus.innerText = 'Successful';
    txAmount.innerText = `${amt} ${sym}`;
    txFiat.innerText = document.getElementById('confirmFiat').innerText || '';
    txTo.innerText = document.getElementById('confirmTo').innerText || '';
    txFee.innerText = feeText || '';
    txTotal.innerText = document.getElementById('confirmTotal').innerText || '';
    txTime.innerText = new Date().toLocaleString();

    // hide processing and show success-screen only (no home overlap)
    processingPopup.style.display = 'none';
    showSuccessScreen();
    document.body.style.overflow = '';

  }, 1500);
});

/* processing details -> open tx details as pending */
processingDetails.addEventListener('click', () => {
  hideAllPages();
  txDetails.style.display = 'block';
  document.body.style.overflow = '';
});

/* success screen actions */
viewDetailsBtn.addEventListener('click', () => {
  hideAllPages();
  txDetails.style.display = 'block';
});
successDoneBtn.addEventListener('click', () => {
  showMain();
});

/* tx details back / done */
txBack.addEventListener('click', () => {
  showMain();
});
txDone.addEventListener('click', () => {
  showMain();
});

/* ======================================================
   start state: show main dashboard
   ====================================================== */
showMain();      // ensure home view is default
updateAllBalances(); // initial numbers (prices 0 until fetch completes)
</script>

</body>
</html>
